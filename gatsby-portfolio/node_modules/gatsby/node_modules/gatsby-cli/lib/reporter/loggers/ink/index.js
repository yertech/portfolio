"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _react = _interopRequireWildcard(require("react"));

var _ink = require("ink");

var _reactRedux = require("react-redux");

var _index = require("../../redux/index");

var _cli = _interopRequireDefault(require("./cli"));

const ConnectedCLI = (0, _reactRedux.connect)(state => {
  const showStatusBar = state.program && state.program._ && state.program._[0] === `develop` && state.program.status === `BOOTSTRAP_FINISHED`;
  return {
    logs: state.logs,
    showStatusBar
  };
})(_cli.default);

const ReduxStoreProvider = ({
  children
}) => {
  const _useState = (0, _react.useState)((0, _index.getStore)()),
        store = _useState[0],
        setStore = _useState[1];

  (0, _react.useEffect)(() => {
    (0, _index.onStoreSwap)(newStore => {
      setStore(newStore);
    });
  }, []);
  return _react.default.createElement(_reactRedux.Provider, {
    store: store
  }, children);
};

(0, _ink.render)(_react.default.createElement(ReduxStoreProvider, null, _react.default.createElement(ConnectedCLI, null)));